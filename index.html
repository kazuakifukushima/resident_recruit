<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>がん・感染症センター都立駒込病院 - 初期研修医募集</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .logo {
            font-size: 2.5em;
            color: #2c5aa0;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 20px;
        }
        
        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .form-title {
            font-size: 1.8em;
            color: #2c5aa0;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }
        
        .required {
            color: #e74c3c;
        }
        
        .specialty-categories {
            margin-top: 15px;
        }
        
        .specialty-category {
            margin-bottom: 25px;
            background: rgba(248, 249, 250, 0.8);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e9ecef;
        }
        
        .category-title {
            color: #2c5aa0;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            padding-left: 12px;
        }
        
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: white;
            border: 1px solid #e1e5e9;
        }
        
        .checkbox-item:hover {
            background: rgba(102, 126, 234, 0.05);
            border-color: #667eea;
            transform: translateY(-1px);
        }
        
        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
            transform: scale(1.2);
            accent-color: #667eea;
        }
        
        .checkbox-item span {
            font-size: 14px;
            color: #333;
            user-select: none;
        }
        
        .checkbox-item:has(input:checked) {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }
        
        .checkbox-item:has(input:checked) span {
            color: #2c5aa0;
            font-weight: 600;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.8s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-message {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .video-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            font-size: 1.8em;
            color: #2c5aa0;
            margin-bottom: 20px;
            font-weight: bold;
            border-left: 5px solid #667eea;
            padding-left: 15px;
        }
        
        .video-placeholder {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 2px dashed #dee2e6;
            transition: all 0.3s ease;
        }
        
        .video-placeholder:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .video-placeholder .play-icon {
            font-size: 4em;
            color: #667eea;
        }
        
        .video-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .video-description {
            color: #666;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .interview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .interview-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .interview-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .interview-video {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 2px dashed #dee2e6;
        }
        
        .photos-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .photo-placeholder {
            aspect-ratio: 3/4;
            background: linear-gradient(135deg, #f1f3f4 0%, #e8eaed 100%);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed #dadce0;
            transition: all 0.3s ease;
            padding: 20px;
            text-align: center;
        }
        
        .photo-placeholder:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .resident-card:hover {
            transform: translateY(-5px) !important;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2) !important;
            background: rgba(255,255,255,0.25) !important;
        }

        .resident-card:hover img {
            transform: scale(1.05) !important;
        }
        
        /* ホバーエフェクトを追加 */
        .video-section [onclick]:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4) !important;
        }
        
        .interview-card [onclick]:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3) !important;
            border-color: #667eea !important;
        }
        
        @media (max-width: 1024px) {
            .photo-grid-top, .photo-grid-bottom {
                grid-template-columns: repeat(3, 1fr) !important;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .form-container, .video-section, .photos-section {
                padding: 20px;
            }
            
            .logo {
                font-size: 2em;
            }
            
            .interview-grid {
                grid-template-columns: 1fr;
            }
            
            .photo-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .photo-grid-top, .photo-grid-bottom {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }

        @media (max-width: 480px) {
            .photo-grid-top, .photo-grid-bottom {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🏥 がん・感染症センター都立駒込病院</div>
            <div class="subtitle">2025年度 研修医募集 - 特別コンテンツ</div>
        </div>
        
        <div id="registration-form" class="form-container">
            <h2 class="form-title">研修医募集コンテンツ閲覧申込</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                以下の情報をご入力いただくと、当院の研修医に関する詳細コンテンツをご覧いただけます。
            </p>
            
            <form id="applicationForm">
                <div class="form-group">
                    <label for="name">名前 <span class="required">*</span></label>
                    <input type="text" id="name" name="name" placeholder="例：駒込 太郎" required>
                    <div id="name-error" class="error-message">名前を入力してください</div>
                </div>
                
                <div class="form-group">
                    <label for="email">メールアドレス <span class="required">*</span></label>
                    <input type="email" id="email" name="email" placeholder="例：komagome@example.com" required>
                    <div id="email-error" class="error-message">正しいメールアドレスを入力してください</div>
                </div>
                
                <div class="form-group">
                    <label for="university">大学名 <span class="required">*</span></label>
                    <input type="text" id="university" name="university" placeholder="例：○○大学" required>
                    <div id="university-error" class="error-message">大学名を入力してください</div>
                </div>
                
                <div class="form-group">
                    <label for="grade">学年 <span class="required">*</span></label>
                    <select id="grade" name="grade" required>
                        <option value="">学年を選択してください</option>
                        <option value="医学部1年">医学部1年</option>
                        <option value="医学部2年">医学部2年</option>
                        <option value="医学部3年">医学部3年</option>
                        <option value="医学部4年">医学部4年</option>
                        <option value="医学部5年">医学部5年</option>
                        <option value="医学部6年">医学部6年</option>
                        <option value="研修医1年目">研修医1年目</option>
                        <option value="研修医2年目">研修医2年目</option>
                        <option value="専攻医">専攻医</option>
                        <option value="その他">その他</option>
                    </select>
                    <div id="grade-error" class="error-message">学年を選択してください</div>
                </div>
                
                <div class="form-group">
                    <label>希望研修科 <span class="required">*</span> (複数選択可)</label>
                    <div class="specialty-categories">
                        <div class="specialty-category">
                            <div class="category-title">🩺 内科系</div>
                            <div class="checkbox-grid">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="循環器内科">
                                    <span>循環器内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="呼吸器内科">
                                    <span>呼吸器内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="消化器内科">
                                    <span>消化器内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="肝臓内科">
                                    <span>肝臓内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="腎臓内科">
                                    <span>腎臓内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="糖尿病内分泌内科">
                                    <span>糖尿病内分泌内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="脳神経内科">
                                    <span>脳神経内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="膠原病科">
                                    <span>膠原病科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="血液内科">
                                    <span>血液内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="腫瘍内科">
                                    <span>腫瘍内科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="感染症科">
                                    <span>感染症科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="総合診療科">
                                    <span>総合診療科</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="specialty-category">
                            <div class="category-title">🔪 外科系</div>
                            <div class="checkbox-grid">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="一般外科">
                                    <span>一般外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="食道外科">
                                    <span>食道外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="胃外科">
                                    <span>胃外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="大腸外科">
                                    <span>大腸外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="肝胆膵外科">
                                    <span>肝胆膵外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="呼吸器外科">
                                    <span>呼吸器外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="乳腺外科">
                                    <span>乳腺外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="整形外科">
                                    <span>整形外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="脳神経外科">
                                    <span>脳神経外科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="心臓血管外科">
                                    <span>心臓血管外科</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="specialty-category">
                            <div class="category-title">🏥 専門科</div>
                            <div class="checkbox-grid">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="小児科">
                                    <span>小児科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="産婦人科">
                                    <span>産婦人科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="精神科">
                                    <span>精神科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="救急科">
                                    <span>救急科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="麻酔科">
                                    <span>麻酔科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="放射線科">
                                    <span>放射線科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="病理科">
                                    <span>病理科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="眼科">
                                    <span>眼科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="耳鼻咽喉科">
                                    <span>耳鼻咽喉科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="皮膚科">
                                    <span>皮膚科</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="specialty" value="泌尿器科">
                                    <span>泌尿器科</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div id="specialty-error" class="error-message">希望研修科を少なくとも1つ選択してください</div>
                </div>
                
                <div class="form-group">
                    <label for="message">メッセージ・質問等</label>
                    <textarea id="message" name="message" rows="4" placeholder="研修に関するご質問やご要望をお書きください"></textarea>
                </div>
                
                <button type="submit" class="submit-btn">📋 コンテンツを閲覧</button>
            </form>
        </div>
        
        <div id="content-section" class="content-section">
            <div class="welcome-message">
                <h2 style="color: #2c5aa0; margin-bottom: 15px;">ようこそ、<span id="welcome-name"></span>さん！</h2>
                <p style="color: #666; font-size: 1.1em;">
                    当院の研修医に関する特別コンテンツをご用意いたしました。<br>
                    将来の医師としてのキャリアを考える参考にしていただければ幸いです。
                </p>
            </div>
            
            <div class="video-section">
                <h3 class="section-title">🏥 医局の様子</h3>
                <div style="width: 100%; height: 350px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <!-- YouTube埋め込み（修正版） -->
                    <iframe width="100%" height="350" 
                            src="https://www.youtube-nocookie.com/embed/Xk5seGirfZQ?rel=0&modestbranding=1&enablejsapi=1&origin=https://claudeai.claude.ai" 
                            title="医局の様子 - 研修医の日常" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen
                            referrerpolicy="strict-origin-when-cross-origin"
                            style="border-radius: 12px;"
                            loading="lazy">
                    </iframe>
                </div>
                <div class="video-title">研修医の日常 - 医局での一日</div>
                <div class="video-description">
                    当院の研修医が実際に働く医局の様子をご紹介します。
                </div>
            </div>
            
            <div class="video-section">
                <h3 class="section-title">🎤 研修医インタビュー</h3>
                <div class="interview-grid">
                    <div class="interview-card">
                        <div class="interview-video" style="width: 100%; height: 200px; border-radius: 8px; overflow: hidden;">
                            <!-- 安田先生インタビュー動画（修正版） -->
                            <iframe width="100%" height="200" 
                                    src="https://www.youtube-nocookie.com/embed/FfmE2Co7hgA?rel=0&modestbranding=1&enablejsapi=1" 
                                    title="安田先生インタビュー - 初期研修医1年目" 
                                    frameborder="0" 
                                    allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    allowfullscreen
                                    referrerpolicy="strict-origin-when-cross-origin"
                                    style="border-radius: 8px;"
                                    loading="lazy">
                            </iframe>
                        </div>
                        <div class="video-title">安田先生（初期研修医1年目）</div>
                        <div class="video-description">
                            「基礎研究と感染症への興味を活かした駒込病院での学びと成長」
                        </div>
                    </div>
                    
                    <div class="interview-card">
                        <div class="interview-video" style="width: 100%; height: 200px; border-radius: 8px; overflow: hidden;">
                            <!-- 高橋先生インタビュー動画（修正版） -->
                            <iframe width="100%" height="200" 
                                    src="https://www.youtube-nocookie.com/embed/Kh1kfboJ398?rel=0&modestbranding=1&enablejsapi=1" 
                                    title="高橋先生インタビュー - 初期研修医1年目" 
                                    frameborder="0" 
                                    allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    allowfullscreen
                                    referrerpolicy="strict-origin-when-cross-origin"
                                    style="border-radius: 8px;"
                                    loading="lazy">
                            </iframe>
                        </div>
                        <div class="video-title">高橋先生（初期研修医1年目）</div>
                        <div class="video-description">
                            「市中病院で体験する大学病院レベルの教育と研究環境」
                        </div>
                    </div>
                    
                    <div class="interview-card">
                        <div class="interview-video" style="width: 100%; height: 200px; border-radius: 8px; overflow: hidden;">
                            <!-- 小田原先生インタビュー動画（修正版） -->
                            <iframe width="100%" height="200" 
                                    src="https://www.youtube-nocookie.com/embed/7HDwyvWQ2lY?rel=0&modestbranding=1&enablejsapi=1" 
                                    title="小田原先生インタビュー - 初期研修医2年目" 
                                    frameborder="0" 
                                    allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    allowfullscreen
                                    referrerpolicy="strict-origin-when-cross-origin"
                                    style="border-radius: 8px;"
                                    loading="lazy">
                            </iframe>
                        </div>
                        <div class="video-title">小田原先生（初期研修医2年目）</div>
                        <div class="video-description">
                            「多様な経験とアカデミックな環境が成長を促す駒込病院のレジデント生活」
                        </div>
                    </div>
                </div>
            </div>
            
    <div class="photos-section" style="margin: 50px 0; padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; position: relative; overflow: hidden;">
                <!-- 背景デコレーション -->
                <div style="position: absolute; top: -50px; right: -50px; width: 200px; height: 200px; background: rgba(255,255,255,0.1); border-radius: 50%; z-index: 1;"></div>
                <div style="position: absolute; bottom: -30px; left: -30px; width: 150px; height: 150px; background: rgba(255,255,255,0.05); border-radius: 50%; z-index: 1;"></div>
                
                <div style="position: relative; z-index: 2;">
                    <h3 class="section-title" style="text-align: center; margin-bottom: 15px; color: white; font-size: 2.2em; text-shadow: 0 2px 10px rgba(0,0,0,0.3);">👩‍⚕️ 研修医の先生達の様子</h3>
                    <p style="text-align: center; margin-bottom: 40px; color: rgba(255,255,255,0.9); font-size: 1.1em; max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.6;">
                        当院で活躍する研修医の先生方の様子をご覧ください。様々な科での研修を通じて、それぞれが医師としての専門性を高めています。
                    </p>
                    
                    <!-- 上段：5枚 -->
                    <div class="photo-grid-top" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 25px; max-width: 1200px; margin-left: auto; margin-right: auto;">
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident1.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident2.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident3.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident4.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident5.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                    </div>
                    
                    <!-- 下段：5枚 -->
                    <div class="photo-grid-bottom" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; max-width: 1200px; margin-left: auto; margin-right: auto;">
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident6.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident7.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident8.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident9.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                        
                        <div class="resident-card" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <img src="/image/resident10.jpg" alt="研修医の先生" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; transition: transform 0.3s ease;">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                <h3 style="color: #2c5aa0; margin-bottom: 15px;">お問い合わせ</h3>
                <p style="color: #666;">
                    見学・実習・オンライン面談は下記アドレスより申し込みをお願いします。<br>
                    📧 km_byoinkengaku@tmhp.jp<br>
                    📞 03-3823-2101（病院代表番号）
                </p>
                <p style="color: #999; margin-top: 20px; font-size: 0.9em;">
                    © 2025 がん・感染症センター都立駒込病院 研修医採用担当
                </p>
            </div>
        </div>
    </div>

    <!-- データ管理パネル（管理者用・非表示） -->
<div id="admin-panel" style="display: none; position: fixed; bottom: 20px; right: 20px; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-radius: 15px; padding: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.2); z-index: 1000; min-width: 250px;">
<div style="display: flex; align-items: center; margin-bottom: 10px;">
<h4 style="color: #2c5aa0; margin: 0; font-size: 0.9em;">📊 申込みデータ管理</h4>
<button onclick="toggleAdminPanel()" style="margin-left: auto; background: none; border: none; font-size: 1.2em; cursor: pointer;">✕</button>
</div>

<div id="data-count" style="color: #666; font-size: 0.8em; margin-bottom: 10px;">
申込み件数: <span id="count-display">0</span>件
</div>

<div style="display: flex; flex-direction: column; gap: 8px;">
<button onclick="downloadCSV()" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8em; transition: all 0.3s ease;">
📄 CSV形式でダウンロード
</button>
<button onclick="downloadJSON()" style="background: #17a2b8; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8em; transition: all 0.3s ease;">
📋 JSON形式でダウンロード
</button>
<button onclick="viewApplications()" style="background: #6f42c1; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8em; transition: all 0.3s ease;">
👁️ データ一覧表示
</button>
<button onclick="clearAllData()" style="background: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8em; transition: all 0.3s ease;">
🗑️ 全データ削除
</button>
</div>
</div>

<!-- データ一覧表示モーダル -->
<div id="data-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center;">
<div style="background: white; border-radius: 15px; padding: 30px; max-width: 90%; max-height: 80%; overflow-y: auto; position: relative;">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
<h3 style="color: #2c5aa0; margin: 0;">📊 申込みデータ一覧</h3>
<button onclick="closeModal()" style="background: none; border: none; font-size: 1.5em; cursor: pointer;">✕</button>
</div>
<div id="data-content" style="overflow-x: auto;"></div>
</div>
</div>
</div>
    
<script>
// データ蓄積用のグローバル変数
let applicationData = [];

// ページ読み込み時に保存されたデータを復元
window.addEventListener('load', function() {
    const savedData = sessionStorage.getItem('hospitalApplications');
    if (savedData) {
        try {
            applicationData = JSON.parse(savedData);
            updateDataCount();
        } catch (e) {
            console.error('保存されたデータの読み込みに失敗しました:', e);
            applicationData = [];
        }
    }
});

document.getElementById('applicationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    console.log('フォーム送信開始');
    
    // ボタンを無効化して重複送信を防止
    const submitBtn = document.querySelector('.submit-btn');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = '📤 送信中...';
    
    // バリデーション
    let isValid = true;
    const fields = ['name', 'university', 'grade', 'email'];
    
    // 通常のフィールドのバリデーション
    fields.forEach(field => {
        const input = document.getElementById(field);
        const errorDiv = document.getElementById(field + '-error');
        
        if (!input.value.trim()) {
            errorDiv.style.display = 'block';
            input.style.borderColor = '#e74c3c';
            isValid = false;
        } else {
            errorDiv.style.display = 'none';
            input.style.borderColor = '#e1e5e9';
        }
    });
    
    // 志望科のバリデーション（チェックボックス）
    const specialtyCheckboxes = document.querySelectorAll('input[name="specialty"]:checked');
    const specialtyError = document.getElementById('specialty-error');
    
    if (specialtyCheckboxes.length === 0) {
        specialtyError.style.display = 'block';
        isValid = false;
    } else {
        specialtyError.style.display = 'none';
    }
    
    // メールアドレスの形式チェック
    const email = document.getElementById('email');
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (email.value && !emailRegex.test(email.value)) {
        document.getElementById('email-error').style.display = 'block';
        document.getElementById('email-error').textContent = '正しいメールアドレスを入力してください';
        email.style.borderColor = '#e74c3c';
        isValid = false;
    }
    
    if (!isValid) {
        // バリデーションエラーの場合はボタンを復旧
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
        
        // エラーがある場合は最初のエラー要素にスクロール
        const firstError = document.querySelector('.error-message[style*="block"]');
        if (firstError) {
            firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        return;
    }
    
    // 選択された志望科を配列として取得
    const selectedSpecialties = Array.from(specialtyCheckboxes).map(checkbox => checkbox.value);
    
    // フォームデータを準備
    const formData = {
        id: Date.now(), // 一意のID
        name: document.getElementById('name').value,
        university: document.getElementById('university').value,
        grade: document.getElementById('grade').value,
        email: document.getElementById('email').value,
        specialty: selectedSpecialties,
        message: document.getElementById('message').value,
        submittedAt: new Date().toLocaleString('ja-JP')
    };
    
    console.log('フォームデータ:', formData);
    
    // データを配列に追加
    applicationData.push(formData);
    
    // セッションストレージに保存（ブラウザを閉じるまで保持）
    try {
        sessionStorage.setItem('hospitalApplications', JSON.stringify(applicationData));
    } catch (e) {
        console.error('データの保存に失敗しました:', e);
    }
    
    // データ件数を更新
    updateDataCount();
    
    // データを記録（コンソールログ）
    console.log('==== 研修医申込みデータ ====');
    console.log('ID:', formData.id);
    console.log('名前:', formData.name);
    console.log('メールアドレス:', formData.email);
    console.log('大学名:', formData.university);
    console.log('学年:', formData.grade);
    console.log('希望研修科:', selectedSpecialties);
    console.log('メッセージ:', formData.message);
    console.log('申込み日時:', formData.submittedAt);
    console.log('総申込み件数:', applicationData.length);
    console.log('========================');
    
    // 少し遅延を入れて送信処理をシミュレート
    setTimeout(() => {
        // バックグラウンドでのみデータ蓄積（ユーザーには見せない）
        console.log('データが正常に蓄積されました。総件数:', applicationData.length);
        
        // グローバル変数にデータを保存（コンテンツ表示用）
        window.formData = formData;
        showContent();
        
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
    }, 800);
});

function showContent() {
    console.log('showContent関数が呼ばれました');
    
    const formContainer = document.getElementById('registration-form');
    const contentSection = document.getElementById('content-section');
    const welcomeName = document.getElementById('welcome-name');
    
    if (formContainer && contentSection && welcomeName) {
        // フォームセクション全体を非表示
        formContainer.style.display = 'none';
        
        // コンテンツセクションを表示
        contentSection.style.display = 'block';
        welcomeName.textContent = window.formData.name;
        
        console.log('ページ切り替え完了:', window.formData.name);
        
        // コンテンツセクションにスムーズスクロール
        contentSection.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
        });
        
        // コンテンツセクションを強調表示
        contentSection.style.boxShadow = '0 0 30px rgba(102, 126, 234, 0.5)';
        setTimeout(() => {
            contentSection.style.boxShadow = '0 8px 32px rgba(0, 0, 0, 0.1)';
        }, 2000);
    } else {
        console.error('必要な要素が見つかりません');
    }
}

// データ管理機能（隠し機能として保持）
function updateDataCount() {
    const countDisplay = document.getElementById('count-display');
    if (countDisplay) {
        countDisplay.textContent = applicationData.length;
    }
}

// 管理者用データアクセス関数（コンソールから実行）
function showAdminPanel() {
    const panel = document.getElementById('admin-panel');
    if (panel) {
        panel.style.display = 'block';
        updateDataCount();
        console.log('管理パネルを表示しました。総データ件数:', applicationData.length);
    }
}

// コンソール用データ確認関数
function getApplicationData() {
    console.log('=== 申込みデータ一覧 ===');
    console.log('総件数:', applicationData.length);
    console.table(applicationData);
    return applicationData;
}

// コンソール用CSV出力関数
function exportCSVFromConsole() {
    downloadCSV();
    console.log('CSVファイルをダウンロードしました。');
}

function downloadCSV() {
    if (applicationData.length === 0) {
        alert('ダウンロードするデータがありません。');
        return;
    }
    
    // CSVヘッダー
    const headers = ['ID', '申込み日時', '名前', 'メールアドレス', '大学名', '学年', '希望研修科', 'メッセージ'];
    
    // CSVデータ作成
    const csvData = [
        headers.join(','),
        ...applicationData.map(data => [
            data.id,
            '"' + data.submittedAt + '"',
            '"' + data.name + '"',
            '"' + data.email + '"',
            '"' + data.university + '"',
            '"' + data.grade + '"',
            '"' + data.specialty.join('; ') + '"',
            '"' + (data.message || '') + '"'
        ].join(','))
    ].join('\n');
    
    // BOMを追加してExcelで正しく表示されるようにする
    const bom = '\uFEFF';
    const blob = new Blob([bom + csvData], { type: 'text/csv;charset=utf-8;' });
    
    // ダウンロード実行
    const link = document.createElement('a');
    const url = URL.createObjectURL(blob);
    link.setAttribute('href', url);
    link.setAttribute('download', '研修医申込みデータ_' + new Date().toISOString().slice(0, 10) + '.csv');
    link.style.visibility = 'hidden';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

function downloadJSON() {
    if (applicationData.length === 0) {
        alert('ダウンロードするデータがありません。');
        return;
    }
    
    const jsonData = JSON.stringify(applicationData, null, 2);
    const blob = new Blob([jsonData], { type: 'application/json' });
    
    const link = document.createElement('a');
    const url = URL.createObjectURL(blob);
    link.setAttribute('href', url);
    link.setAttribute('download', '研修医申込みデータ_' + new Date().toISOString().slice(0, 10) + '.json');
    link.style.visibility = 'hidden';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

function viewApplications() {
    if (applicationData.length === 0) {
        alert('表示するデータがありません。');
        return;
    }
    
    const modal = document.getElementById('data-modal');
    const content = document.getElementById('data-content');
    
    // テーブル作成
    let tableHTML = '<table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">';
    tableHTML += '<thead><tr style="background: #f8f9fa;">';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">ID</th>';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">申込み日時</th>';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">名前</th>';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">メール</th>';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">大学</th>';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">学年</th>';
    tableHTML += '<th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">希望科</th>';
    tableHTML += '</tr></thead><tbody>';
    
    applicationData.forEach(data => {
        tableHTML += '<tr>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.id + '</td>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.submittedAt + '</td>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.name + '</td>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.email + '</td>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.university + '</td>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.grade + '</td>';
        tableHTML += '<td style="border: 1px solid #dee2e6; padding: 8px;">' + data.specialty.join(', ') + '</td>';
        tableHTML += '</tr>';
    });
    
    tableHTML += '</tbody></table>';
    content.innerHTML = tableHTML;
    modal.style.display = 'flex';
}

function closeModal() {
    document.getElementById('data-modal').style.display = 'none';
}

function clearAllData() {
    if (confirm('すべての申込みデータを削除しますか？\nこの操作は取り消せません。')) {
        applicationData = [];
        sessionStorage.removeItem('hospitalApplications');
        updateDataCount();
        alert('全データを削除しました。');
    }
}

function toggleAdminPanel() {
    const panel = document.getElementById('admin-panel');
    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
}

// フォームの入力時にエラーメッセージを非表示にする
document.querySelectorAll('input[type="text"], input[type="email"], select, textarea').forEach(input => {
    input.addEventListener('input', function() {
        const errorDiv = document.getElementById(this.id + '-error');
        if (errorDiv) {
            errorDiv.style.display = 'none';
            this.style.borderColor = '#e1e5e9';
        }
    });
});

// チェックボックスの変更時にエラーメッセージを非表示にする
document.querySelectorAll('input[name="specialty"]').forEach(checkbox => {
    checkbox.addEventListener('change', function() {
        const specialtyError = document.getElementById('specialty-error');
        const checkedBoxes = document.querySelectorAll('input[name="specialty"]:checked');
        if (checkedBoxes.length > 0) {
            specialtyError.style.display = 'none';
        }
    });
});

// YouTube iframe エラー検出とフォールバック
function handleYouTubeError() {
    console.log('YouTube埋め込みエラーが検出されました');
    
    // すべてのYouTube iframeを検査
    const iframes = document.querySelectorAll('iframe[src*="youtube"]');
    
    iframes.forEach((iframe, index) => {
        iframe.addEventListener('error', function() {
            console.log('iframe ' + (index + 1) + ' でエラーが発生しました');
            showFallback(iframe);
        });
        
        // 読み込み完了をチェック
        iframe.addEventListener('load', function() {
            console.log('iframe ' + (index + 1) + ' が正常に読み込まれました');
        });
    });
}

function showFallback(iframe) {
    const container = iframe.parentElement;
    const videoId = iframe.src.match(/embed\/([^?]+)/);
    const id = videoId ? videoId[1] : 'unknown';
    
    container.innerHTML = '<div style="width: 100%; height: 100%; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #667eea; cursor: pointer; border: 2px dashed #dee2e6;" onclick="window.open(\'https://www.youtube.com/watch?v=' + id + '\', \'_blank\')">' +
        '<div style="font-size: 3.5em; margin-bottom: 10px;">📺</div>' +
        '<div style="font-size: 1em; font-weight: bold; margin-bottom: 5px;">動画を視聴</div>' +
        '<div style="font-size: 0.8em; color: #666; display: flex; align-items: center;">' +
        '<span style="margin-right: 5px;">▶️</span>YouTubeで開く</div>' +
        '</div>';
}

</script>
</body>
</html>
